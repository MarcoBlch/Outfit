<%# Only show ads to free tier users %>
<% if user_signed_in? && current_user.free_tier? %>
  <div class="my-6">
    <!-- Advertisement Label -->
    <div class="glass rounded-t-xl px-4 py-2 border-b border-white/10">
      <div class="flex items-center justify-between">
        <p class="text-xs text-gray-500 uppercase tracking-wider">Advertisement</p>
        <%= link_to new_subscription_path, class: "text-xs text-primary hover:text-primary-dark transition-colors" do %>
          Remove ads - Upgrade to Premium
        <% end %>
      </div>
    </div>

    <!-- Ad Container -->
    <div class="glass rounded-b-xl p-6 border-t-0">
      <!-- Google AdSense Placeholder -->
      <!-- Replace with your actual AdSense code once approved -->
      <div class="bg-black/20 rounded-lg p-8 text-center border border-white/5">
        <!-- Desktop Ad (728x90) -->
        <div class="hidden md:block mx-auto" style="min-height: 90px;">
          <% if ENV['GOOGLE_ADSENSE_CLIENT_ID'].present? %>
            <!-- Google AdSense Code -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=<%= ENV['GOOGLE_ADSENSE_CLIENT_ID'] %>"
                 crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:inline-block;width:728px;height:90px"
                 data-ad-client="<%= ENV['GOOGLE_ADSENSE_CLIENT_ID'] %>"
                 data-ad-slot="<%= ENV['GOOGLE_ADSENSE_SLOT_ID'] %>"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          <% else %>
            <!-- Placeholder for development -->
            <div class="flex flex-col items-center justify-center h-full">
              <svg class="w-12 h-12 text-gray-600 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
              <p class="text-sm text-gray-500">728x90 Ad Space</p>
              <p class="text-xs text-gray-600 mt-1">Configure GOOGLE_ADSENSE_CLIENT_ID in .env</p>
            </div>
          <% end %>
        </div>

        <!-- Mobile Ad (320x50) -->
        <div class="block md:hidden mx-auto" style="min-height: 50px;">
          <% if ENV['GOOGLE_ADSENSE_CLIENT_ID'].present? %>
            <!-- Google AdSense Code -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=<%= ENV['GOOGLE_ADSENSE_CLIENT_ID'] %>"
                 crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:inline-block;width:320px;height:50px"
                 data-ad-client="<%= ENV['GOOGLE_ADSENSE_CLIENT_ID'] %>"
                 data-ad-slot="<%= ENV['GOOGLE_ADSENSE_MOBILE_SLOT_ID'] %>"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          <% else %>
            <!-- Placeholder for development -->
            <div class="flex flex-col items-center justify-center h-full py-2">
              <svg class="w-8 h-8 text-gray-600 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
              <p class="text-xs text-gray-500">320x50 Mobile Ad</p>
            </div>
          <% end %>
        </div>
      </div>

      <!-- CTA to Remove Ads -->
      <div class="mt-4 text-center">
        <%= link_to new_subscription_path, class: "inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium text-gray-400 hover:text-white transition-colors" do %>
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
          </svg>
          Upgrade to remove ads and unlock Premium features
        <% end %>
      </div>
    </div>
  </div>
<% end %>
